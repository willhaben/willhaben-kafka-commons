language: java

script: mvn verify -B

before_deploy:
  - openssl aes-256-cbc -K $encrypted_171b1c559d7b_key -iv $encrypted_171b1c559d7b_iv -in deployment/signingkey.asc.enc -out deployment/signingkey.asc -d

deploy:
  provider: script
  script: >-
    gpg2 --keyring=$TRAVIS_BUILD_DIR/pubring.gpg --no-default-keyring --import deployment/signingkey.asc &&
    gpg2 --allow-secret-key-import --keyring=$TRAVIS_BUILD_DIR/secring.gpg --no-default-keyring --batch --import deployment/signingkey.asc &&
    mvn clean deploy --settings deployment/settings.xml -Dgpg.executable=gpg2 -Dgpg.keyname=CF057DEA79BC0012747C171636F636C094E451AB -Dgpg.passphrase=$GPG_PASSPHRASE -Dgpg.publicKeyring=$TRAVIS_BUILD_DIR/pubring.gpg -Dgpg.secretKeyring=$TRAVIS_BUILD_DIR/secring.gpg
  skip_cleanup: true
  on:
    tags: true

env:
  global:
  - secure: SJqbqRkzrCZ9kA1Bj1+4Gnbk7IfRn+IB1U+CIa/7YjIdX3TtxtTW4yABbcHNuYKpDpegMOcqQek2T3gdiLvOvr8au1/KokfPvU2PYe8eUuLzCOVcpe+TFc6gQTRlilLkjahKyPPrBmoT3/5nwibDFglk7mNssY0nevgr4mImNGYeft3NHgEmxX2CIaI8g4wbJfAVvOu6/ZLakex+Ho+mbJTo7A6rv4k68pz//zfeOqYeV5iJ8JWr3V6c8UsA+kuFWySlay+RlkcNjfe8Kog08LpjmIwz+NBsKn+HwbxJUO0OkJq2t39PZHV3b+SbS/msWWbRxWRx38iGScNXf9tLmfVdO7VCOcynX5siFueNJvsVZlqpTJhHADWfoVKMq9Zx+WAtvG+qVvMA1eCu4nk9n3DcSvz9DjGEaUHc2jyiVRZ6x+xKXFI1QTihSLk2aE5Xu0ABYfDSwG/0IVIYN3Ar9CiKjXzTtztQVSH5eQaIHdmxe48ghFoRgQDuBm6KnXK4bBpwvo2+Lff/+tpJE12ub0Bh07YdCgrxU3pzqjAYdCWiXZ5MmvBST3Eff7hdQKAtZvnaCzm+6scQ9R9z+yhHAsTVt0/UWVa+m/SOT6yuJANLMjezPb9Cp8w6Jp68p9hdXZn2hLYIGDvlRf9/Q0D7IO0aGbPH6Lb2f4B3TwOPRSY=
  - secure: poOB4BMjntU/aO0vtYdI11FrJS0X+Xy50g7MlmYs7ug1md75+f79adox6N7hUluXdBtSbDYAfGZyhRKACYDu4Jyq2b1+Jzt3jNRTTvtpMmeSAnrYGGmPwrVgBY5kEPU/TJ5rcNh8XI0a/5q/6Vq//YBIhCcpfqbsu7PIcPE/wbRvK3TCUJ1ScEldBYzEqQS8ESyvPHqtSZfgD/ypa3W9utHJdtjbkgbV1eBj9JA9A2alzm0weD8EpDtzM/1p+j7Kf1fzrjxFd4h/lthqM3MAi90ZFjbUcaWNMhDlQGhxs94CGfLqLrgf19t9nbqdqjTjnkQH02ofWmBGUTR6g8NHalprZtomwznLCOdWu7qONPaN3yngwWXPNyjJSjXNZ0fcPCYg003zGNsioJoZ2zWepodKN5LHj6rim1SEp8B/74LjeJwAQu8VYV/FMR6fh0v9lfVEm72tKKCBKsxcet2DxX1HkmJaSZSPWmKeuLBUwxHpfQWKoOSpF2EnaaGOv2UwCdCweMsS9rJTHbuB9aEH/39XE83ubWrQLMW7jUfideaLbbhYCx2B4/kk2OTG4CkqQOiRivEY3JzAtVBTrPU9L+eFbkUb/K9ZiDi/aZCbf7e228HOxOdmfofLRSzNUNsej2O8PDmj9+epR5bEmzsTcK78gJuVd5PHyApzQelDTo0=
  - secure: Bo/IDIp8Gr5GQyleWztfM+gpCDNxqyonGPDYTGUgcRbHW2ZvYfr8pNeN19QPOIE7REAqT7ChNblsmpwaEaBqv40s5QdEYt35KLERCHRV1CLD5Nn6QuACz1lGY54LvMbEQTixzgFyptC/1Oafg/uUytAMWa+cAMbz9hgIhvoc5uw7hjgo3sIy2q5VRwKXuA+pDBeiGAIT8D9DygKBJcdJd+Hc7lhTGlexpD0pfJMY+yNRzNw4wBODwc6DRehgYIrhieuJ7B2M1XJVFAJ9mXw8xTKY9xptc/+Cn5wLosPHNy6nPk5+ujHAgGti4YNXFUnP/JuRy2rpLBMeEWF41WoXj10aXHxNp3ub1ya2S57uWFFTOKHol3vX/3iWkelLb2cuPCSbBpfAiyI8WFUNw9Dz14jbWQQbAx9AwYdqHmq48YQi8Uteed7PtjwTk5cwm+HNj3sG/oPOB4m4vWHWXC9GLJDBOzZ4S5HASdxxhiIBgL2SFhjAXGW1M5A8Lp4m8QGl2A568x0yqjL511O2HzE2LNrd9Kx9d5fdNVGeDzd5bPWJdvH451ptLhcVUZ/xKYqlpSFLzwqAT7ABoW4d6ZZ4CxZmRaIIidKudc7/q6eMB57ew+mhBXoD0JWGRQY5UPDDljH6DR6tqj0wh1TmCHiMWzFjgXG/PKlDRiCt2PW7i/o=
